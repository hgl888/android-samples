{"time":"0002","tplId":"QUICKPAY@cashier-card-no-flex","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-card-no-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"js/cashier-card-no-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","children":[{"text":"var getTag=amc.fn.getById;var rpc=amc.rpcData;var scanFlag=false;var cameraImg=amc.path+\"alipay_msp_icon_camera\";var lastNoValue=\"\";function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var e=rpc.switchAcc?amc.res.navMore:null;var d=rpc.switchAcc?onChangeAccount:null;var b={};if(rpc.backAct===\"back\"){b.backMode=\"back\"}var f=amc.fn.navBack(true,\"{{add_card}}\",null,e,onBack,d,b);getTag(\"body\").insertBefore(f,getTag(\"mainBody\"));if(rpc.newCardTip){getTag(\"newCardTip\").innerText=rpc.newCardTip}else{amc.fn.hide(\"newCardTipBox\")}if(getTag(\"navImgR\")!==undefined){getTag(\"navImgR\").alt=\"{{switch_account}}\"}if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}getTag(\"camera\").src=cameraImg;if(rpc.gonggao){var c=amc.fn.create(\"div\");c.className=\"amc-marquee amc-pd-lr\";var a=amc.fn.create(\"marquee\");a.className=\"amc-marquee\";a.innerText=rpc.gonggao||\"\";c.appendChild(a);a.style.width=window.innerWidth-(amc.isPlus?40:30);getTag(\"body\").insertBefore(c,getTag(\"mainBody\"))}updateState(\"\");getTag(\"cardNo\").focus()}function updateState(d){var b=getTag(\"camera\");var c=getTag(\"submit\");var a=d.replace(/\\s/g,\"\");if(a.length>=12){c.disabled=false;getTag(\"btnText\").style.color=\"#fff\"}else{c.disabled=true;getTag(\"btnText\").style.color=\"#d2d2d2\"}if(a.length){amc.fn.hide(\"cameraBox\")}else{if(!rpc.disable){amc.fn.show(\"cameraBox\")}}}function formatBankNo(){var a=getTag(\"cardNo\");var b=a.value||\"\";if(b){a.value=(b.replace(/(\\d{4})(?=\\d)/g,\"$1 \")).trim()||\"\"}updateState(b)}function checkInput(){var b=getTag(\"cardNo\").value||\"\";var a=b.replace(/\\s/g,\"\");var c=\"^\\\\d{0,19}$\";if(a.match(c)){lastNoValue=b}else{getTag(\"cardNo\").value=lastNoValue;return}formatBankNo();scanFlag=false}function onBack(){if(rpc.backAct===\"back\"){amc.fn.back()}else{if(rpc.backAct){var a={action:{name:rpc.backAct}};a.param={};a.param[\"first_enter_cashier\"]=false;document.submit(a)}else{amc.fn.exitConfirm()}}}function onKeyDown(){if(event.which==4){onBack()}}function onSubmit(){var a={};a.action={name:\"/card/verifyCardNo\",loadtxt:\"\",host:rpc.pci_url,https:true,enctype:\"application/x-www-form-urlencoded\",request_param:\"requestData\",params:rpc.params};a.param={cardno:getTag(\"cardNo\").value.split(\" \").join(\"\")};if(scanFlag){a.param[\"scanflag\"]=true}document.asyncSubmit(a,function(c){if(c.pageloading===\"1\"){amc.fn.hide(\"btnText\");amc.fn.show(\"loading\")}else{if(c.pageloading===\"0\"){amc.fn.show(\"btnText\");amc.fn.hide(\"loading\")}else{if(c.status){var b=c.status.substr(2,2);if(b===\"02\"){getTag(\"cardNo\").focus()}}}}});amc.fn.hide(\"btnText\");amc.fn.show(\"loading\")}function onScanCard(){document.asyncSubmit({action:{name:\"loc:scancard\"}},function(a){if(a.data){getTag(\"cardNo\").value=a.data;formatBankNo();scanFlag=true}})}function dial(){var a=\"loc:tel('95188', '1')\";var b={action:{name:a}};document.submit(b);getTag(\"dlg\").close()}function onChangeAccount(){if(rpc.switchAcc){var a=new Array();a.push(\"{{switch_account}}\");document.actionSheet({btns:a,cancelBtn:\"{{cancel}}\"},function(b){if(b.index===0){var c={action:{name:\"/cashier/switchAccount\"}};c.param={backAct:\"exit\"};document.submit(c)}})}};","tag":"text"}]},{"tag":"style","children":[{"text":".guide-circle {\r\n        background-color: #ccc;\r\n        border-radius: 4px;\r\n        height: 8px;\r\n        width: 8px;\r\n    }\r\n    \r\n    .guide-line2px {\r\n        background-color: #ccc;\r\n        height: 2px;\r\n        flex: 5.0;\r\n    }\r\n    \r\n    .guide-blank-area {\r\n        flex: 2.0;\r\n    }\r\n    \r\n    .guide-upper-box {\r\n        justify-content: center;\r\n    }\r\n    \r\n    .guide-lower-box {\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n    \r\n    .loading-color {\r\n        color: #fff;\r\n    }\r\n    \r\n    .camera-box {\r\n        align-items: center;\r\n    }\r\n    \r\n    .card-no-cell {\r\n        background-color: #fff;\r\n        align-items: center;\r\n        padding-top: 5px;\r\n        padding-bottom: 5px;\r\n    }\r\n    \r\n    .ellipsis-3-line {\r\n        -webkit-line-clamp: 3;\r\n        -webkit-box-orient: vertical;\r\n        display: -webkit-box;\r\n    }\r\n    \r\n    .dlg-title-box {\r\n        margin-top: 21px;\r\n        margin-bottom: 6px;\r\n        padding: 0 15px;\r\n    }\r\n    \r\n    .dlg-title {\r\n        font-size: 18px;\r\n        font-weight: bold;\r\n        text-align: center;\r\n        flex: 1;\r\n    }\r\n    \r\n    .dlg-dot {\r\n        margin-top: 7px;\r\n        width: 4px;\r\n        height: 4px;\r\n        background-color: #777;\r\n        border-radius: 2px;\r\n    }\r\n    \r\n    .dlg-list {\r\n        font-size: 15px;\r\n        margin-left: 6px;\r\n    }\r\n    \r\n    .tip-box {\r\n        padding: 9px 15px 0 15px;\r\n    }\r\n    \r\n    .pd-lr {\r\n        padding-left: 15px;\r\n        padding-right: 15px;\r\n    }\r\n    \r\n    .dlg-btn-text {\r\n        font-size: 17px;\r\n        color: #108ee9;\r\n        text-align:center;\r\n        margin: 11.5px 15px;\r\n    }\r\n    \r\n    .dlg-line {\r\n        margin-top: 18px;\r\n    }\r\n    \r\n    .amc-dlg-width {\r\n        width: 270px;\r\n        max-width: 270px;\r\n        min-width: 270px;\r\n    }\r\n    \r\n    .amc-dlg-box {\r\n        border: 0;\r\n        background-color: #fff;\r\n        border-radius: 8px;\r\n        width: 270px;\r\n        align-items: center;\r\n    }\r\n    \r\n    .text-light-color {\r\n        color: #777;\r\n    }\r\n    \r\n    .font-l {\r\n        font-size: 16px;\r\n    }\r\n    \r\n    .font-m {\r\n        font-size: 14px;\r\n    }\r\n    \r\n    .font-super {\r\n        font-size: 20px;\r\n    }","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{},{"id":"mainBody","tag":"div","children":[{},{"id":"newCardTipBox","tag":"div","children":[{"id":"newCardTip","tag":"label","css":"text-light-color font-m amc-flex-1 ellipsis-3-line"}],"css":"amc-align-center amc-pd-lr amc-margin-b-ss"},{},{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"{{card_no}}","tag":"text"}],"css":"ellipsis-3-line amc-flex-1 font-l"}],"css":"amc-cell-l-box"},{"tag":"div","children":[{"id":"cardNo","autofocus":"true","placeholder":"{{new_card_placeholder}}","tag":"input","value":"","type":"number","css":"amc-input font-l","oninput":"checkInput();"}],"css":"amc-cell-m-box amc-input-box-height"},{"id":"cameraBox","tag":"div","children":[{"id":"camera","tag":"img"}],"onclick":"onScanCard();","css":"camera-box amc-hidden"}],"css":"card-no-cell amc-pd-lr"},{"tag":"div","css":"amc-1px-line"},{},{"tag":"div","children":[{"tag":"label","children":[{"text":"{{alipay_sec}}","tag":"text"}],"css":"text-light-color amc-flex-1 font-m ellipsis-3-line"}],"onclick":"getTag('dlg').showModal();","css":"amc-cell-footer-box"},{"tag":"div","children":[{"id":"submit","tag":"div","children":[{"id":"loading","tag":"img","src":"indicatior","css":"amc-loading-img loading-color amc-hidden"},{"id":"btnText","tag":"label","children":[{"text":"{{next}}","tag":"text"}],"css":"amc-btn-disabled-color font-super amc-btn-disabled-color amc-text-center amc-flex-1 amc-ellipsis"}],"onclick":"onSubmit();","disabled":"true","css":"amc-btn-primary amc-justify-center amc-align-center"}],"css":"amc-pd-lr amc-pd-b"}],"css":"amc-main amc-scroll-android"},{},{"id":"dlg","tag":"dialog","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"{{cashier_no_dlg_title}}","tag":"text"}],"css":"dlg-title"}],"css":"dlg-title-box"},{"tag":"div","children":[{"tag":"div","children":[{"tag":"div","css":"dlg-dot"},{"tag":"label","children":[{"text":"{{cashier_no_tip_1}}","tag":"text"}],"css":"dlg-list amc-flex-1"}],"css":"tip-box"},{"tag":"div","children":[{"tag":"div","css":"dlg-dot"},{"tag":"label","children":[{"text":"{{cashier_no_tip_2}}","tag":"text"}],"css":"dlg-list amc-flex-1"}],"css":"tip-box"},{"tag":"div","children":[{"tag":"div","css":"dlg-dot"},{"tag":"label","children":[{"text":"{{cashier_no_tip_3}}","tag":"text"}],"css":"dlg-list amc-flex-1"}],"css":"tip-box"},{"tag":"div","children":[{"tag":"div","css":"dlg-dot"},{"tag":"label","children":[{"text":"{{cashier_no_tip_4}}","tag":"text"}],"css":"dlg-list amc-flex-1"}],"css":"tip-box"},{"tag":"div","children":[{"tag":"div","css":"dlg-dot"},{"tag":"label","children":[{"text":"{{cashier_no_tip_5}}","tag":"text"}],"onclick":"dial();","css":"dlg-list amc-flex-1"}],"css":"tip-box"},{"tag":"div","css":"amc-adapt-line dlg-line"},{"tag":"div","children":[{"tag":"label","children":[{"text":"{{cashier_no_dlg_btn}}","tag":"text"}],"css":"dlg-btn-text amc-flex-1 amc-ellipsis"}],"onclick":"getTag('dlg').close();","css":"amc-align-center amc-justify-center"}],"css":"amc-v-box amc-dlg-width"}],"css":"amc-dlg-box amc-v-box"}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.1.5"}