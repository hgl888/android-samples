{"time":"0005","tplId":"QUICKPAY@cashier-channel-logo-flex","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-channel-logo-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var getTag=amc.fn.getById;var show=amc.fn.show;var hide=amc.fn.hide;var create=amc.fn.create;var rpc=amc.rpcData;var PATH=amc.path+\"alipay_msp_\";var HUI_PNG=PATH+\"hui\";var FAN_PNG=PATH+\"fan\";var BUSY_PNG=PATH+\"busy\";var RECOMMEND_PNG=PATH+\"recommend\";var CHARGE_FREE_PNG=PATH+\"free\";var GOU_PNG=PATH+\"gou\";var windowWidth=window.innerWidth||0;function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var c=rpc.exit?amc.res.close:amc.res.arrowLeft;var e=rpc.setting?\"{{setting}}\":null;var f=amc.fn.iNav(c,\"{{sel_pay_tool}}\",e,null,onBack,gotoSetting);getTag(\"body\").insertBefore(f,getTag(\"iLine\"));if(getTag(\"iNavBoxR\")&&getTag(\"iNavBoxL\")){getTag(\"iNavBoxR\").style.width=amc.isPlus?85:75;getTag(\"iNavBoxL\").style.width=amc.isPlus?85:75}if(rpc.err){amc.fn.show(\"errMsgBox\");getTag(\"errMsg\").innerText=rpc.err}var d=(rpc.payments&&rpc.payments.length)||0;for(var b=0;b<d;b++){createPaymentItem(rpc.payments[b]);createChildren(rpc.payments[b]);var a=create(\"div\",\"amc-1px-line\"+(b<d-1?\" margin-l\":\"\"),getTag(\"channel\"))}}function createPaymentItem(j,d){if(!j.disable){j.detailAction=\"\"}var g=windowWidth-30;var l=\" name-font-size\";var i=create(\"div\",\"cell-box amc-align-center\",getTag(\"channel\"));if(j&&j.add){j.logo=amc.path+\"alipay_msp_add_card\"}else{if(j&&j.type==\"sharePeerpay\"){j.logo=amc.path+\"alipay_msp_peerpay_logo\"}}var k=createLogo(i,j,d);g-=36;var f=create(\"div\",\"amc-v-box-center\",i);var a=create(\"div\",\"amc-align-center\",f);var c=create(\"label\",l+\" amc-ellipsis\",a);c.innerText=j.name||\"\";if(j.tail){var e=create(\"label\",l+\" amc-ellipsis\",a);e.innerText=j.tail;e.style.maxWidth=62;g-=62}if(j.rec){var h=create(\"img\",\"icon-wide\",a);h.src=RECOMMEND_PNG;g-=37.5}if(j.hui){var h=create(\"img\",\"icon\",a);h.src=HUI_PNG;g-=25}if(j.fan){var h=create(\"img\",\"icon\",a);h.src=FAN_PNG;g-=25}if(j.busy){var h=create(\"img\",\"icon\",a);h.src=BUSY_PNG;g-=25}var b=createDetails(f,j);if(j.disable){disableItem(i,j,k,a)}else{if(!j.children||!j.children.length){bandOnclickEvent(i,j,d);g-=30}}g=max(g,104);c.style.maxWidth=g;return i}function max(d,c){return d>c?d:c}function disableItem(a,c,b,d){if(!a||!c){return}if(b){b.style.opacity=0.5}if(d){d.style.opacity=0.53}if(!c.detailAction){a.disabled=true}}function createDetails(e,h){if(!e||!h||!h.detail){return}var d=create(\"div\",\"amc-align-center detail-margin-t\",e);var g=\"detail-font-size\";var c=g+\" amc-flex-1 detail-font-color\"+(h.chargeFree?\" amc-line-through\":\"\");var a=create(\"label\",c+\" amc-ellipsis-3-line\",d);a.innerText=h.detail;if(h.detailAction){a.onclick=function(){var i={action:{name:h.detailAction,loadtxt:\"\"}};document.submit(i);if(h.dlg&&h.dlg[\"btnRightAction\"]){setTimeout(function(){showDlg(h.dlg)},1000)}}}if(h.chargeFree){a.className+=\" amc-ellipsis\";a.style.flex=0;var b=create(\"img\",\"icon\",d);b.src=CHARGE_FREE_PNG;var f=windowWidth-(30+36+30)-25;a.style.maxWidth=max(f,160)}}function createLogo(a,d,b){if(!d){return}var c=create(\"div\",\"channel-logo-size logo-margin-r amc-align-center amcjustify-center\",a);if(!b&&d.logo){var e=create(\"img\",\"channel-logo-size\",c);if(d.logo.indexOf(\"local:\")===0){e.src=amc.path+d.logo.substr(\"local:\".length)}else{e.src=d.logo}e.defaultvalue=PATH+\"bank_logo\";e.failurevalue=PATH+\"bank_logo\"}return c}function bandOnclickEvent(a,d,c){if(!a||!d){return}a.className+=\" amc-press-box\";var b=create(\"div\",\"amc-align-center right-img-box\",a);var e=create(\"img\",\"\",b);if(d.checked){e.src=GOU_PNG}else{if(d.add||d.type==\"sharePeerpay\"){e.src=amc.res.arrowRight}}a.onclick=function(){if(d.checked){amc.fn.back();return}var f={action:{name:d.action||\"/cashier/switchChannelSel\",loadtxt:\"\"},param:{selected_channel:(c?d.parentValue:d.value),first_enter_cashier:false}};if(c){f.param[\"child_channel\"]=d.childValue}if(!d.add){f.action[\"l2rmode\"]=\"1\"}e.src=amc.res.indicator;document.asyncSubmit(f,function(g){if(g.pageloading===\"1\"){e.src=amc.res.indicator}else{if(g.pageloading===\"0\"){e.src=(d.add||d.type==\"sharePeerpay\")?amc.res.arrowRight:\"\"}}})}}function createChildren(b){var a=b&&b.children;if(!a||!a.length){return}for(var d=0;d<a.length;d++){var c=create(\"div\",\"amc-1px-line margin-l\",getTag(\"channel\"));c.style.marginLeft=51;a[d][\"parentValue\"]=b.value;createPaymentItem(a[d],true)}}function gotoSetting(){if(rpc.setting){document.submit({action:{name:\"/forward/setting\"}})}}function onBack(){if(rpc.exit){amc.fn.exitConfirm()}else{amc.fn.back()}}function onKeyDown(){if(event.which==4){onBack()}}function showDlg(a){if(!a||!a.btnRight||!a.dlgTxt||!a.btnLeft||!a.btnRight){return}getTag(\"dlgTxt\").innerText=a.dlgTxt;getTag(\"btnLeft\").innerText=a.btnLeft;getTag(\"btnRight\").innerText=a.btnRight;getTag(\"btnRight\").onclick=function(){var b={action:{name:a.btnRightAction}};document.submit(b);getTag(\"dlg\").close()};getTag(\"dlg\").showModal()};","tag":"text"}]},{"tag":"style","children":[{"text":".channel-logo-size {\n    height: 24px;\n    width: 24px;\n}\n.logo-margin-r {\n    margin-right: 12px;\n}\n.icon {\n    margin-left: 9px;\n    height: 16px;\n    max-height: 16px;\n    min-height: 16px;\n    align-self: center;\n}\n.icon-wide {\n    margin-left: 9px;\n    height: 16px;\n    max-height: 16px;\n    min-height: 16px;\n    align-self: center;\n}\n.right-img-box {\n    width: 25px;\n    margin-left: 5px;\n    justify-content: flex-end;\n}\n.cell-pd-tb {\n    padding-top: 10px;\n    padding-bottom : 10px;\n}\n.btn-text{font-weight:bold;color:#108ee9;margin: 15px 0;}\n.btn-vertical-line{width:1px; align-self:stretch; margin: 7px 0;background-color:#e5e5e5;}\n.dlg-title{\n    -webkit-line-clamp:4;\n    -webkit-box-orient:vertical;\n    display:-webkit-box;\n}\n.error-msg-box {\n    padding-top: 12px;\n    background-color:#ffeeee;\n}\n\n.error-msg {\n    margin: 0 15px;\n    font-size: 14px;\n    color:#f4333c;\n    text-align:left;\n    margin-bottom: 12px;\n}\n.pd-lr {\n    padding-left: 15px;\n    padding-right: 15px;\n}\n.pd {\n    padding: 15px;\n}\n.name-font-size {\n    font-size: 16px;\n}\n.detail-margin-t {\n    margin-top: 3px;\n}\n.detail-font-color {\n    color: #777;\n}\n.detail-font-size {\n    font-size: 14px;\n}\n.cell-box {\n    padding: 10px 15px;\n    min-height: 60px;\n}\n.margin-lr {\n    margin-left: 15px;\n    margin-right: 15px;\n}\n.margin-l {\n    margin-left: 15px;\n}\n.margin {\n    margin: 15px;\n}\n\n.amc-dlg-width {\n    width: 270px;\n    max-width: 270px;\n    min-width: 270px;\n}\n\n.amc-dlg-box {\n    border: 0;\n    background-color: #fff;\n    border-radius: 8px;\n    width: 270px;\n    align-items: center;\n}","tag":"text"}]}]},{"id":"body","onload":"init();","tag":"body","children":[{"id":"iLine","tag":"div","css":"amc-1px-title-line"},{"tag":"div","children":[{"tag":"div","children":[{"id":"channel","tag":"div","children":[{"id":"errMsgBox","tag":"div","children":[{"id":"errMsg","tag":"label","css":"error-msg amc-flex-1 amc-ellipsis-2-line channel-logo-box"},{"tag":"div","css":"amc-adapt-line"}],"css":"error-msg-box amc-hidden amc-v-box"}],"css":"amc-scroll-flex"}],"css":"amc-flex-1"}],"css":"amc-flex-1"},{"id":"dlg","tag":"dialog","children":[{"id":"dlgTxt","tag":"label","css":"amc-font-m amc-text-center margin dlg-title"},{"tag":"div","children":[{"tag":"div","css":"amc-adapt-line"},{"tag":"div","children":[{"id":"btnLeft","tag":"label","onclick":"getTag('dlg').close();","css":"btn-text amc-font-xxl amc-flex-1 amc-text-center amc-ellipsis-2-line"},{"tag":"div","css":"btn-vertical-line"},{"id":"btnRight","tag":"label","css":"btn-text amc-font-xxl amc-flex-1 amc-text-center amc-ellipsis-2-line"}],"css":"amc-align-center amc-justify-center"}],"css":"amc-v-box amc-justify-center amc-dlg-width"}],"css":"amc-dlg-box amc-v-box"}],"onkeydown":"onKeyDown();","css":"amc-i-body"}]},"format":"JSON","tplVersion":"5.1.6"}