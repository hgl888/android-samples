{"time":"0006","tplId":"QUICKPAY@afterpay-guide-flex","publishVersion":"150924","tag":"QUICKPAY","name":"afterpay-guide-flex","data":{"tag":"html","children":[{},{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var create = amc.fn.create;\n    var show = amc.fn.show;\n    var hide = amc.fn.hide;\n    var getTag = amc.fn.getById;\n    var rpc = amc.rpcData;\n\n    //退出\n    function onBack() {\n        amc.fn.hideKeyboard();\n        amc.fn.back();\n    }\n\n    function init() {\n        try {\n            initUI();\n\n            if (amc.fn.logPageInit) {\n                amc.fn.logPageInit(true);\n            }\n        } catch (e) {\n            if (amc.fn.logPageInit) {\n                amc.fn.logPageInit();\n            }\n        }\n    }\n\n\n    function initUI() {\n\n        // logo\n        var imgDefaultSrc = amc.path + 'alipay_msp_logo_login';\n        var imgSrc = rpc.logo || imgDefaultSrc;\n        var logoTag = getTag('alipayLogo');\n        logoTag.src = imgSrc;\n        logoTag.defaultValue = imgDefaultSrc;\n        logoTag.failureValue = imgDefaultSrc;\n\n        // 业务结果\n        if (rpc.resultMsg) {\n            show('resultMsgBox');\n            getTag('resultMsg').innerText = rpc.resultMsg;\n        }\n\n        // 说明\n        if (rpc.tip) {\n            show('tipBox');\n            getTag('tip').innerText = rpc.tip;\n        }\n\n        createButtons(rpc.btns);\n        \n        // 去掉导航栏之后iOS需要设置状态栏间距\n        if(amc.isIOS) {\n            show('iOSStatusPaddding');\n        }\n    }\n\n    /**\n     * 创建按钮列表\n     * @param  {Array} btns 按钮列表\n     */\n    function createButtons(btns) {\n        if (!amc.fn.isArray(btns)) {\n            return;\n        }\n\n        for (var i = 0; i < btns.length; i++) {\n            var btn = btns[i];\n            if (!btn['txt'] || !btn['action']) {\n                continue;\n            }\n\n            var btnBox = create('div', 'margin-lr amc-align-center amc-justify-center amc-btn-primary margin-t', getTag('btns'));\n\n            var loadingImg = create('img', 'amc-loading-img amc-text-white-clolor amc-hidden', btnBox);\n\n            // Android平台没有白色菊花，需要特殊处理\n            if (amc.isAndroid) {\n                loadingImg.src = amc.path + 'alipay_msp_indicator_white_loading';\n            } else {\n                loadingImg.src = amc.res.indicator;\n            }\n\n            var button = create('button', 'amc-btn-primary amc-flex-1 amc-ellipsis amc-text-center', btnBox);\n            button.innerText = btn['txt'];\n\n\n            var obj = {\n                'action': btn['action']\n            };\n\n            bindButtonAction(button, loadingImg, obj);\n        }\n    }\n\n    /**\n     * 绑定按钮事件\n     * @param  {DOM Object} button 按钮\n     * @param  {Object} submitObj 提交数据\n     */\n    function bindButtonAction(button, loadingImg, submitObj) {\n        if (!button || !submitObj || !submitObj['action']) {\n            return;\n        }\n\n        button.onclick = function() {\n            document.asyncSubmit(submitObj, function(data) {\n                amc.fn.shouldShowBtnIndicator(data, button, loadingImg);\n            });\n            amc.fn.shouldShowBtnIndicator({\n                'pageloading': '1'\n            }, button, loadingImg);\n        }\n    }\n\n    function onComplete() {\n        amc.fn.exit();\n    }\n\n    /**\n     * 覆盖安卓物理返回按键\n     */\n    function onKeyDown() {\n        if (event.which == 4) {\n\n        }\n    }","tag":"text"}]},{"tag":"style","children":[{"text":".logo-img {\n        height: 60px;\n        width: 60px;\n        margin-top: 10px;\n    }\n    \n    .pd-t {\n        padding-top: 15px;\n    }\n    \n    .result-text {\n        font-size: 21px;\n        color: #108ee9;\n        text-align: center;\n        margin-top: 12px;\n    }\n    \n    .margin-t {\n        margin-top: 15px;\n    }\n    \n    .tip-text {\n        font-size: 15px;\n        color: #888;\n        text-align: center;\n        margin-top: 6px;\n    }\n    \n    .margin-lr {\n        margin-left: 15px;\n        margin-right: 15px;\n    }\n    \n    .blue-font {\n        color: #108ee9;\n    }\n    \n    .full-body {\n        display: flex;\n        flex-direction: column;\n        padding: 0px;\n        margin: 0px;\n        height: 100%;\n        background-color: #f5f5f9\n    }\n    \n    .nav-bar {\n        padding: 12px 0;\n    }\n    \n    .nav-font {\n        font-size: 17px;\n    }\n    \n    .nav-r-box {\n        padding: 10px 15px;\n    }\n    \n    .pd-box {\n        height: 20px;\n    }\n    \n    .pd-b-l {\n        padding-bottom: 20px;\n    }\n    \n    .pd-lr {\n        padding-left: 15px;\n        padding-right: 15px;\n    }","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"topBody","tag":"div","children":[{},{"id":"iOSStatusPaddding","tag":"div","css":"pd-box amc-hidden"},{},{"tag":"div","children":[{"tag":"div","css":"amc-flex-1"},{"tag":"div","children":[{"tag":"label","children":[{"text":"{{complete}}","tag":"text"}],"css":"amc-text-right blue-font nav-font"}],"onclick":"onComplete();","css":"nav-r-box"}],"css":"nav-bar"},{},{"tag":"div","children":[{"id":"alipayLogo","tag":"img","css":"logo-img"}],"css":"amc-flex-center"},{},{"id":"resultMsgBox","tag":"div","children":[{"id":"resultMsg","tag":"label","css":"result-text amc-flex-1 amc-text-center"}],"css":"amc-hidden"},{"id":"tipBox","tag":"div","children":[{"id":"tip","tag":"label","css":"amc-flex-1 tip-text"}],"css":"amc-hidden pd-lr"}],"css":"amc-bg-white amc-v-box pd-b-l"},{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{},{"id":"btns","tag":"div","css":"amc-v-box"}],"css":"amc-v-box pd-t"}],"onkeydown":"onKeyDown();","css":"full-body"}]},"format":"JSON","tplVersion":"5.1.3"}