{"time":"0002","tplId":"QUICKPAY@frontpay-channel-logo-flex","publishVersion":"150924","tag":"QUICKPAY","name":"frontpay-channel-logo-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"js/frontpay-channel-logo-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var getTag=amc.fn.getById;var show=amc.fn.show;var hide=amc.fn.hide;var create=amc.fn.create;var rpc=amc.rpcData;var path=amc.path+\"alipay_msp_\";var gouPng=path+\"gou\";var addCardAction=\"/frontpay/newCard\";var nextAction=\"loc:returnData\";function createPaymentItem(o,k){var l=getTag(\"channel\");var m=create(\"div\");m.className=\"channel-item\";var j;var e=create(\"img\");if(o.new_card){o.usable=true;o.logo=amc.path+\"alipay_msp_add_card\"}if(o.logo){if(o.logo.indexOf(\"local:\")===0){e.src=amc.path+o.logo.substr(\"local:\".length)}else{e.src=o.logo}e.defaultvalue=path+\"bank_logo\";e.failurevalue=path+\"bank_logo\";e.className=\"channel-logo\";m.appendChild(e);if(!o.usable){e.style.cssText=\"opacity:0.5\"}}var n=create(\"div\",\"amc-item-m-box\",m);var p=create(\"div\",\"amc-v-box amc-flex-1\",n);var c=create(\"div\",\"\",p);var f=create(\"label\",\"channel-name amc-ellipsis\",c);if(o.new_card){f.style.maxWidth=window.innerWidth-96}else{f.style.maxWidth=window.innerWidth-96-62}f.innerText=o.name||\"\";var b=create(\"label\",\"channel-name amc-ellipsis\",c);b.style.maxWidth=62;b.innerText=o.tail||\"\";var a;var g=false;if(o.available){a=o.available_title;g=true}if(!o.usable){f.style.color=\"#777\";b.style.color=\"#777\";if(o.close_msg){a=o.close_msg}else{if(o.available_title){a=o.available_title}}g=true;m.disabled=true}else{m.onclick=function(){var s={action:{name:nextAction}};if(o.new_card){s.action[\"name\"]=addCardAction}else{if(rpc.bizType===\"deposit\"){s.action[\"name\"]=\"loc:reload;loc:back\"}}if(rpc.bizType===\"deposit\"){var u={};u.choosed_channel_no=k;u.recommend_bank_logo_url=(e&&e.src)||\"\";var t=o.value;if(t){u.limit_amount=t.availableAmount||\"\";u.assignedChannel=t.assignedChannel||\"\";u.recommend_channel_name=t.channelName;var r=t.cardInfo;if(r){u.recommend_card_tailno=r.cardNo}s.param=u}document.submit(s)}else{s.action[\"loadtxt\"]=\"\";submit_obj={};submit_obj.resultStatus=o.end_code;submit_obj.result=toString(o.value);submit_obj.memo=\"\";s.action[\"params\"]=submit_obj;document.asyncSubmit(s,function(v){if(v.pageloading===\"1\"){hide(d);show(j)}else{if(v.pageloading===\"0\"){hide(j);show(d)}}})}hide(d);show(j)};m.className+=\" amc-press-box\"}if(g){var i=create(\"label\",\"channel-detail amc-ellipsis-2-line\",p);i.innerText=a||\"\";if(o.close_msg&&o.detailAction){m.disabled=false;i.style.cssText=\"color:#777; flex:1.0;white-space: wrap;\";p.onclick=function(){var r={action:{name:o.detailAction,loadtxt:\"\"}};document.submit(r)}}}var d=create(\"img\",\"\",m);d.style.marginLeft=\"0px\";if(o.checked){d.src=gouPng}if(o.new_card){d.src=amc.res.arrowRight}d.id=\"add\";j=create(\"img\",\"amc-hidden\",m);j.src=\"indicatior\";var h=create(\"div\");if(k<rpc.channels.length-1){h.className=\"pd-l\"}var q=create(\"div\",\"amc-1px-line amc-flex-1\",h);l.appendChild(m);l.appendChild(h)}function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var c=rpc.setting?\"{{setting}}\":null;var e=amc.fn.iNav(amc.res.close,\"{{sel_pay_tool}}\",c,null,onClose,gotoSetting);getTag(\"body\").insertBefore(e,getTag(\"iLine\"));if(getTag(\"iNavBoxR\")&&getTag(\"iNavBoxL\")){getTag(\"iNavBoxR\").style.width=amc.isPlus?85:75;getTag(\"iNavBoxL\").style.width=amc.isPlus?85:75}if(rpc.err){amc.fn.show(\"errMsgBox\");getTag(\"errMsg\").innerText=rpc.err}if(rpc.bizType===\"deposit\"){addCardAction=\"loc:back;/setting/addCard\";nextAction=\"loc:back;/deposit/channelChoosed\"}for(var a=0;a<rpc.channels.length;a++){createPaymentItem(rpc.channels[a],a)}var d=rpc.newCardChannel;if(d&&d.usable){var b={};b.new_card=true;b.usable=true;b.name=rpc.newCardChannel.name;b.tail=\"\";createPaymentItem(b,-1)}}function addNewCard(){document.submit({action:{name:\"/frontpay/newCard\"}})}function gotoSetting(){document.submit({action:{name:\"/forward/setting\"}})}function onClose(){if(rpc.bizType===\"deposit\"){amc.fn.back()}else{amc.fn.exit()}}function onKeyDown(){if(event.which==4){onClose()}}function toString(a){if(a==undefined||a==null){return\"{}\"}if(typeof a==\"string\"){return a}else{if(typeof a==\"object\"){return JSON.stringify(a)}else{return a+\"\"}}};","tag":"text"}]},{"tag":"style","children":[{"text":".channel-item {\n    align-items: center;\n    padding: 10px 15px;\n    min-height: 60px;\n}\n\n.error-msg-box {\n    padding-top: 12px;\n    background-color:#ffeeee;\n}\n\n.error-msg {\n    font-size: 14px;\n    color:#f4333c;\n    text-align:left;\n    margin-bottom: 12px;\n}\n\n.pd-lr {\n    padding-left: 15px;\n    padding-right: 15px;\n}\n.margin-lr {\n    margin-left: 15px;\n    margin-right: 15px;\n}\n\n.channel-logo {\n    height: 24px;\n    width: 24px;\n    margin-right: 12px;\n}\n\n.channel-name {\n    font-size: 16px;\n    letter-spacing: 0px;\n    color: #000;\n    \n    align-items: center;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.channel-detail {\n    margin-top: 3px;\n    font-size: 14px;\n    color: #777;\n}\n.pd-l {\n    padding-left: 15px;\n}","tag":"text"}]}]},{"id":"body","onload":"init();","tag":"body","children":[{"id":"iLine","tag":"div","css":"amc-1px-title-line"},{"tag":"div","children":[{"id":"channel","tag":"div","children":[{"id":"errMsgBox","tag":"div","children":[{"id":"errMsg","tag":"label","css":"error-msg amc-flex-1 amc-ellipsis-2-line margin-lr"},{"tag":"div","css":"amc-adapt-line"}],"css":"error-msg-box amc-hidden amc-v-box"}],"css":"amc-column-flex-1 amc-scroll"},{"tag":"div","children":[{"tag":"div","css":"amc-1px-line"}],"css":"pd-lr"}],"css":"amc-column-flex-1"}],"onkeydown":"onKeyDown();","css":"amc-i-body"}]},"format":"JSON","tplVersion":"5.1.6"}